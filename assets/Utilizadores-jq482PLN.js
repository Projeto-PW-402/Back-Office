var le=Object.defineProperty;var se=(b,o,r)=>o in b?le(b,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):b[o]=r;var y=(b,o,r)=>se(b,typeof o!="symbol"?o+"":o,r);import{c as j,N as oe}from"./Navbar-CFcv24k0.js";import{d as Y,r as n,J as ie,i as L,c as p,o as i,I as h,a as e,f as m,u as B,e as N,v as q,G as $,w as ne,K as Z,g as ee,L as re,l as F,y as z,p as de,O as H,F as W,E as Q,H as V,D as g,M as ue,t as x,N as ce}from"./index-DXanHhjz.js";import{c as pe,a as ve,d as me,n as ye}from"./userService-BPWHVbBk.js";import{I as be}from"./index-BOAzHGzj.js";import{X as fe}from"./x-wE9q6DMA.js";import{_ as ae}from"./plugin-vueexport-helper-DlAUqK2U.js";import{T as ge}from"./trash-2-CmnOKcjk.js";/**
 * @license lucide-vue-next v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=j("bell-ring",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]]);/**
 * @license lucide-vue-next v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=j("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=j("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);class xe{constructor(o){y(this,"id",0);y(this,"nome","");y(this,"morada","");y(this,"dataNascimento","");y(this,"especialidade","");y(this,"email","");y(this,"telemovel",0);y(this,"listaAuditorias",[]);y(this,"allowed",!0);Object.assign(this,o)}}const Ue={class:"name-container"},_e={class:"morada-container"},Ce={class:"email-container"},Me={class:"number-inputs"},Ee={class:"data-container"},Ne={class:"number-container"},qe={class:"tele-container"},ze={class:"especialidade-container"},$e={type:"submit"},De=Y({__name:"NewUser",props:{visible:{type:Boolean}},emits:["user-added"],setup(b,{emit:o}){const w=n(b.visible),S=Z(),I=ee(),U=o,_=n(""),C=n(""),D=n(""),P=n(""),f=n(),A=n("");ie(()=>{const M=S.query.add;w.value=M==="true"});function v(){w.value=!1,I.push({path:"/users",query:{add:"false"}})}async function T(){const M=new xe({nome:_.value,morada:C.value,email:D.value,dataNascimento:P.value,telemovel:f.value,especialidade:A.value});try{await pe(M),U("user-added"),I.push({path:"/users"})}catch(l){console.error("Erro ao adicionar utilizador:",l)}}const k=n(null);return L(()=>{k.value&&be(k.value,{mask:"00/00/0000"})}),(M,l)=>(i(),p("div",{class:"main-container",style:h({display:w.value?"flex":"none"})},[l[14]||(l[14]=e("div",{class:"title"},"Adicionar Utilizador",-1)),e("div",{class:"close",onClick:v},[m(B(fe))]),e("form",{id:"userForm",onSubmit:ne(T,["prevent"])},[e("div",Ue,[N(e("input",{type:"text",id:"name","onUpdate:modelValue":l[0]||(l[0]=d=>_.value=d),placeholder:""},null,512),[[q,_.value]]),l[6]||(l[6]=e("label",{class:"name-label",for:"name"},"Nome",-1))]),e("div",_e,[N(e("input",{type:"text",id:"morada","onUpdate:modelValue":l[1]||(l[1]=d=>C.value=d),placeholder:""},null,512),[[q,C.value]]),l[7]||(l[7]=e("label",{class:"morada-label",for:"morada"},"Morada",-1))]),e("div",Ce,[N(e("input",{type:"email",id:"email","onUpdate:modelValue":l[2]||(l[2]=d=>D.value=d),placeholder:""},null,512),[[q,D.value]]),l[8]||(l[8]=e("label",{class:"email-label",for:"email"},"Email",-1))]),e("div",Me,[e("div",Ee,[N(e("input",{ref_key:"inputRef",ref:k,"onUpdate:modelValue":l[3]||(l[3]=d=>P.value=d),placeholder:"dd/mm/yyyy",class:"form-control",type:"text"},null,512),[[q,P.value]]),l[9]||(l[9]=e("label",{class:"data-label",for:"dataNascimento"},"Data de Nascimento",-1))]),e("div",Ne,[l[11]||(l[11]=e("select",{class:"form-select",name:"countries"},[e("option",{value:"PT"},"PT"),e("option",{value:"ES"},"ES"),e("option",{value:"FR"},"FR")],-1)),e("div",qe,[N(e("input",{type:"number",id:"number","onUpdate:modelValue":l[4]||(l[4]=d=>f.value=d),placeholder:"xxx.xxx.xxx"},null,512),[[q,f.value]]),l[10]||(l[10]=e("label",{class:"number-label",for:"number"},"Número Telemóvel",-1))])])]),e("div",ze,[N(e("input",{type:"text",id:"especialidade","onUpdate:modelValue":l[5]||(l[5]=d=>A.value=d),placeholder:""},null,512),[[q,A.value]]),l[12]||(l[12]=e("label",{class:"especialidade-label",for:"especialidade"},"Especialidade",-1))]),e("button",$e,[l[13]||(l[13]=$("Adicionar")),m(B(we),{width:"22",height:"22"})])],32)],4))}}),Pe=ae(De,[["__scopeId","data-v-06b0f300"]]),Ae={class:"container-fluid p-4 bg-light min-vh-100"},Re={class:"table-responsive bg-white"},Ve={class:"table mb-0"},Be={class:"text-center align-middle"},Ie={key:0,class:"text-center"},Te={class:"actions",style:{color:"orange"}},Le=["onClick"],Se=["onClick"],Fe={key:1},We={class:"pagination"},je={class:"pagination pagination-sm mb-0"},Oe={key:0,class:"page-item"},Ge={key:1,class:"page-item disabled"},Je={key:1,class:"page-link active"},Ke={key:6,class:"page-item disabled"},Xe={key:7,class:"page-item"},He=Y({__name:"Utilizadores",setup(b){const o=n([]),r=n(10),w=Z(),S=ee(),I=n(window.innerWidth),U=n(window.innerHeight);C(U.value);function _(){I.value=window.innerWidth,U.value=window.innerHeight}function C(t){t<650?r.value=2:t<864?r.value=6:t<956?r.value=7:t<1316?r.value=10:r.value=17}L(()=>{window.addEventListener("resize",_)}),re(()=>{window.removeEventListener("resize",_)}),F(U,t=>{C(t),U.value=t}),z(()=>o.value.length===v.value.length);const D=z(()=>{const t=w.query.add;return!(t===void 0||t==="false")}),P=n(!1),f=n(D.value);F(()=>w.query.add,t=>{f.value=t!=="false"&&t!==void 0});function A(){P.value=!0,f.value=!0,S.push({path:"/users",query:{add:"true"}})}const v=n([]);let T;async function k(){v.value=await ve(),v.value.length===0?v.value=[]:console.log("Utilizadores carregados com sucesso:",v.value)}L(async()=>{await k(),console.log(v.value),T=window.setInterval(k,5e3)}),de(()=>{clearInterval(T)});async function M(t){try{await me(t),await k(),console.log("Utilizador eliminado com sucesso:",t)}catch(a){console.error("Erro ao eliminar utilizador:",a)}}async function l(t){try{await ye(t)}catch(a){console.error("Erro ao eliminar utilizador:",a)}}const d=z(()=>{const t=(u.value-1)*r.value;return v.value.slice(t,t+r.value)}),O=z(()=>{const t=w.query.page,a=Array.isArray(t)?t[0]:t;return parseInt(a||"1")}),E=z(()=>Math.ceil(v.value.length/r.value)),u=n(O.value),te=z(()=>{const t=[],a=Math.floor(2);let c=Math.max(u.value-a,1),s=c+4-1;s>E.value&&(s=E.value,c=Math.max(s-4,1));for(let R=c;R<=s;R++)t.push(R);return t});F(O,t=>{u.value=t,console.log("Current page:",t)});const G=H("tableData"),J=H("tableEspecialidade"),K=n(),X=n();return L(()=>{var t,a;K.value=(t=G.value)==null?void 0:t.getBoundingClientRect().width,X.value=(a=J.value)==null?void 0:a.getBoundingClientRect().width,console.log("Width of tableData:",X.value)}),(t,a)=>{const c=ue("router-link");return i(),p(W,null,[e("div",{class:"main-container",style:h({filter:f.value?"blur(5px)":"blur(0)"})},[m(oe,{page:2,disable:f.value},null,8,["disable"]),e("div",Ae,[a[14]||(a[14]=e("h2",{class:"mb-4 fw-bold",id:"title"},"Users",-1)),e("div",Re,[e("table",Ve,[e("thead",Be,[e("tr",null,[a[0]||(a[0]=e("th",{scope:"col"},"Nome",-1)),a[1]||(a[1]=e("th",{scope:"col"},"Morada",-1)),e("th",{scope:"col",class:"data",ref_key:"tableData",ref:G},"Data De Nascimento",512),e("th",{scope:"col",ref_key:"tableEspecialidade",ref:J},"Especialidade",512),a[2]||(a[2]=e("th",{scope:"col"},"Email",-1)),a[3]||(a[3]=e("th",{scope:"col"},"Telemóvel",-1)),a[4]||(a[4]=e("th",{scope:"col"},"Ação",-1))])]),v.value.length>0?(i(),p("tbody",Ie,[(i(!0),p(W,null,Q(d.value,s=>(i(),p("tr",{key:s.id},[e("td",{style:h({backgroundColor:o.value.includes(s.id)?"lightblue":"white"})},x(s.nome),5),e("td",{class:"morada",style:h({backgroundColor:o.value.includes(s.id)?"lightblue":"white"})},x(s.morada),5),e("td",{class:"row",style:h({minWidth:K.value,backgroundColor:o.value.includes(s.id)?"lightblue":"white"})},x(s.dataNascimento),5),e("td",{style:h({backgroundColor:o.value.includes(s.id)?"lightblue":"white"})},x(s.especialidade),5),e("td",{style:h({backgroundColor:o.value.includes(s.id)?"lightblue":"white"})},a[5]||(a[5]=[e("a",{href:"emailto:{{ user.email }}"},"Send Email",-1)]),4),e("td",{style:h({backgroundColor:o.value.includes(s.id)?"lightblue":"white"})},x(s.telemovel),5),e("td",{class:"actions-container",style:h({backgroundColor:o.value.includes(s.id)?"lightblue":"white"})},[e("button",Te,[m(B(ke),{width:"20px",height:"20px"})]),e("button",{class:"actions",style:{color:"red"},onClick:R=>M(s.id)},[m(B(ge),{width:"20px",height:"20px"})],8,Le),e("button",{class:"actions",style:{color:"black"},onClick:R=>l(s.id)},[m(B(he),{width:"20px",height:"20px"})],8,Se)],4)]))),128))])):(i(),p("p",Fe))])]),e("nav",We,[e("ul",je,[u.value!=1?(i(),p("li",Oe,[m(c,{to:{path:"/users",query:{page:u.value-1}},class:"page-link"},{default:g(()=>a[6]||(a[6]=[e("span",{class:"page-link",id:"prev"},"<<Prev",-1)])),_:1},8,["to"])])):(i(),p("li",Ge,[m(c,{to:{path:"/users",query:{page:u.value-1}},class:"page-link"},{default:g(()=>a[7]||(a[7]=[e("span",{class:"page-link",id:"prev"},"<<Prev",-1)])),_:1},8,["to"])])),u.value!==1?(i(),V(c,{key:2,to:{path:"/users",query:{page:1}},class:"page-link"},{default:g(()=>a[8]||(a[8]=[$(" First ")])),_:1})):(i(),V(c,{key:3,to:{path:"/users",query:{page:1}},class:"page-link disabled"},{default:g(()=>a[9]||(a[9]=[$(" First ")])),_:1})),(i(!0),p(W,null,Q(te.value,s=>(i(),p("li",{key:s,class:ce(["page-item",{active:s===u.value}])},[s!==u.value?(i(),V(c,{key:0,to:{path:"/users",query:{page:s}},class:"page-link"},{default:g(()=>[$(x(s),1)]),_:2},1032,["to"])):(i(),p("span",Je,x(s),1))],2))),128)),u.value!==E.value?(i(),V(c,{key:4,to:{path:"/users",query:{page:E.value}},class:"page-link"},{default:g(()=>a[10]||(a[10]=[$(" Last ")])),_:1},8,["to"])):(i(),V(c,{key:5,to:{path:"/users",query:{page:E.value}},class:"page-link disabled"},{default:g(()=>a[11]||(a[11]=[$(" Last ")])),_:1},8,["to"])),u.value==E.value?(i(),p("li",Ke,[m(c,{to:{path:"/users",query:{page:u.value+1}},class:"page-link"},{default:g(()=>a[12]||(a[12]=[e("span",{class:"page-link",id:"next"},"Next >>",-1)])),_:1},8,["to"])])):(i(),p("li",Xe,[m(c,{to:{path:"/users",query:{page:u.value+1}},class:"page-link"},{default:g(()=>a[13]||(a[13]=[e("span",{class:"page-link",id:"next"},"Next >>",-1)])),_:1},8,["to"])]))])]),e("div",{class:"text-end mt-3"},[e("button",{class:"btn btn-warning",id:"adicionar",onClick:A},"Adicionar")])])],4),m(Pe,{visible:f.value,onUserAdded:k},null,8,["visible"])],64)}}}),oa=ae(He,[["__scopeId","data-v-3c41c3e5"]]);export{oa as default};
