var se=Object.defineProperty;var ne=(h,r,u)=>r in h?se(h,r,{enumerable:!0,configurable:!0,writable:!0,value:u}):h[r]=u;var C=(h,r,u)=>ne(h,typeof r!="symbol"?r+"":r,u);import{c as O,N as re}from"./Navbar-WhxOcJwi.js";import{d as j,r as n,J as X,c as g,o as p,I as $,a as e,f as b,u as L,e as _,v as q,G as I,w as Y,g as H,K as R,i as J,L as de,l as F,y as U,p as ue,F as Q,E as K,H as T,D as x,M as ce,t as P,N as pe}from"./index-Bph_iwWA.js";import{c as ve,f as me,u as W,a as be}from"./materialService-EQM2v9Ok.js";import{X as Z}from"./x-zuvvmeHI.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as ye}from"./trash-2-D1pPK10g.js";/**
 * @license lucide-vue-next v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=O("diamond-plus",[["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41L13.7 2.71a2.41 2.41 0 0 0-3.41 0z",key:"1ey20j"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-vue-next v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=O("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);class ae{constructor(r){C(this,"id",0);C(this,"nome","");C(this,"tipo","");C(this,"descricao","");C(this,"quant",0);C(this,"preco",0);C(this,"visible",!0);Object.assign(this,r)}}const ge={class:"name-container"},he={class:"middle-container"},ke={class:"tipo-container"},Me={class:"quantidade-container"},we={class:"preco-container"},_e={class:"descricao-container"},qe={type:"submit"},xe=j({__name:"NewMaterial",props:{visible:{type:Boolean}},emits:["material-added"],setup(h,{emit:r}){const u=h,k=n(u.visible),A=R(),E=H(),N=r,y=n(""),f=n(""),M=n(""),v=n(0),d=n(0);X(()=>{const V=A.query.add;k.value=V==="true"});async function z(){const V=new ae({nome:y.value,tipo:f.value,descricao:M.value,quant:v.value,preco:d.value});try{await ve(V),N("material-added"),E.push({path:"/materiais"})}catch(l){console.error("Erro ao adicionar utilizador:",l)}}function w(){k.value=!1,E.push({path:"/materiais",query:{add:"false"}})}return(V,l)=>(p(),g("div",{class:"main-container",style:$({display:u.visible?"flex":"none"})},[l[11]||(l[11]=e("div",{class:"title"},"Adicionar Material",-1)),e("div",{class:"close",onClick:w},[b(L(Z))]),e("form",{id:"materialForm",onSubmit:Y(z,["prevent"])},[e("div",ge,[_(e("input",{type:"text",id:"name","onUpdate:modelValue":l[0]||(l[0]=s=>y.value=s),placeholder:""},null,512),[[q,y.value]]),l[5]||(l[5]=e("label",{class:"name-label",for:"name"},"Nome",-1))]),e("div",he,[e("div",ke,[_(e("input",{type:"text",id:"tipo","onUpdate:modelValue":l[1]||(l[1]=s=>f.value=s),placeholder:""},null,512),[[q,f.value]]),l[6]||(l[6]=e("label",{class:"tipo-label",for:"tipo"},"Tipo",-1))]),e("div",Me,[_(e("input",{type:"number",id:"quantidade","onUpdate:modelValue":l[2]||(l[2]=s=>v.value=s),placeholder:""},null,512),[[q,v.value]]),l[7]||(l[7]=e("label",{class:"quantidade-label",for:"quantidade"},"Quantidade",-1))])]),e("div",we,[_(e("input",{type:"number",id:"preco","onUpdate:modelValue":l[3]||(l[3]=s=>d.value=s),placeholder:""},null,512),[[q,d.value]]),l[8]||(l[8]=e("label",{class:"preco-label",for:"preco"},"Preço",-1))]),e("div",_e,[_(e("input",{type:"text",id:"descricao","onUpdate:modelValue":l[4]||(l[4]=s=>M.value=s),placeholder:""},null,512),[[q,M.value]]),l[9]||(l[9]=e("label",{class:"descricao-label",for:"descricao"},"Descrição",-1))]),e("button",qe,[l[10]||(l[10]=I("Adicionar")),b(L(ee),{width:"22",height:"22"})])],32)],4))}}),$e=G(xe,[["__scopeId","data-v-745873d8"]]),Ve={class:"name-container"},Ce=["placeholder"],Ee={class:"middle-container"},Ne={class:"tipo-container"},ze=["placeholder"],Ue={class:"quantidade-container"},Pe=["placeholder"],Ie={class:"preco-container"},Ae=["placeholder"],Be={class:"descricao-container"},Le=["placeholder"],De={type:"submit"},Te=j({__name:"EditMaterial",props:{isModalVisible:{type:Boolean}},emits:["material-added","material-edited"],setup(h,{emit:r}){const u=h,k=n(u.isModalVisible),A=R(),E=H(),N=r,y=n(),f=n(),M=n(),v=n(),d=n(),z=n(!0);X(()=>{const s=Number(A.query.id),a=A.query.edit;k.value=a==="true",!isNaN(s)&&a==="true"&&w(s)});async function w(s){try{const a=await me(s);y.value=a.nome,f.value=a.tipo,M.value=a.descricao,v.value=a.quant,d.value=a.preco,z.value=a.visible,console.log("Material:",a)}catch(a){console.error("Erro ao buscar material:",a)}}async function V(){let s=z;if(v.value<0||d.value<0){alert("Quantidade e preço não podem ser negativos.");return}v.value===0&&(s.value=!1);const a=new ae({nome:y.value,tipo:f.value,descricao:M.value,quant:v.value,preco:d.value,visible:s.value});try{await W(a.id,a),N("material-edited"),E.push({path:"/materiais"})}catch(m){console.error("Erro ao adicionar utilizador:",m)}}function l(){k.value=!1,E.push({path:"/materiais",query:{edit:"false"}})}return(s,a)=>(p(),g("div",{class:"main-container",style:$({display:u.isModalVisible?"flex":"none"})},[a[11]||(a[11]=e("div",{class:"title"},"Editar Material",-1)),e("div",{class:"close",onClick:l},[b(L(Z))]),e("form",{id:"materialForm",onSubmit:Y(V,["prevent"])},[e("div",Ve,[_(e("input",{type:"text",id:"name","onUpdate:modelValue":a[0]||(a[0]=m=>y.value=m),placeholder:y.value},null,8,Ce),[[q,y.value]]),a[5]||(a[5]=e("label",{class:"name-label",for:"name"},"Nome",-1))]),e("div",Ee,[e("div",Ne,[_(e("input",{type:"text",id:"tipo","onUpdate:modelValue":a[1]||(a[1]=m=>f.value=m),placeholder:f.value},null,8,ze),[[q,f.value]]),a[6]||(a[6]=e("label",{class:"tipo-label",for:"tipo"},"Tipo",-1))]),e("div",Ue,[_(e("input",{type:"number",id:"quantidade","onUpdate:modelValue":a[2]||(a[2]=m=>v.value=m),placeholder:v.value},null,8,Pe),[[q,v.value]]),a[7]||(a[7]=e("label",{class:"quantidade-label",for:"quantidade"},"Quantidade",-1))])]),e("div",Ie,[_(e("input",{type:"number",id:"preco","onUpdate:modelValue":a[3]||(a[3]=m=>d.value=m),placeholder:d.value},null,8,Ae),[[q,d.value]]),a[8]||(a[8]=e("label",{class:"preco-label",for:"preco"},"Preço",-1))]),e("div",Be,[_(e("input",{type:"text",id:"descricao","onUpdate:modelValue":a[4]||(a[4]=m=>M.value=m),placeholder:M.value},null,8,Le),[[q,M.value]]),a[9]||(a[9]=e("label",{class:"descricao-label",for:"descricao"},"Descrição",-1))]),e("button",De,[a[10]||(a[10]=I("Update")),b(L(ee),{width:"22",height:"22"})])],32)],4))}}),Fe=G(Te,[["__scopeId","data-v-73e89ea6"]]),Se={class:"container-fluid p-4 bg-light min-vh-100"},Qe={class:"table-responsive bg-white"},We={class:"table mb-0"},je={class:"text-center align-middle"},He=["onClick"],Re=["onClick"],Ge={class:"pagination"},Je={class:"pagination pagination-sm mb-0"},Ke={key:0,class:"page-item"},Oe={key:1,class:"page-item disabled"},Xe={key:1,class:"page-link active"},Ye={key:6,class:"page-item disabled"},Ze={key:7,class:"page-item"},ea=j({__name:"Materiais",setup(h){const r=n([]),u=n(10),k=R(),A=H(),E=n(window.innerWidth),N=n(window.innerHeight);f(N.value);function y(){E.value=window.innerWidth,N.value=window.innerHeight}function f(t){t<864?u.value=5:t<956?u.value=7:u.value=10}J(()=>{window.addEventListener("resize",y)}),de(()=>{window.removeEventListener("resize",y)}),F(N,t=>{f(t)}),U(()=>r.value.length===d.value.length);const M=U(()=>{const t=(a.value-1)*u.value;return d.value.slice(t,t+u.value)}),v=U(()=>{const t=k.query.page,i=Array.isArray(t)?t[0]:t;return parseInt(i||"1")}),d=n([]);let z;async function w(){d.value=await be(),d.value.length===0?d.value=[]:console.log("Materiais carregados com sucesso:",d.value)}J(async()=>{await w(),console.log(d.value),z=window.setInterval(w,5e3)}),ue(()=>{clearInterval(z)});async function V(t,i){try{await W(t,i),await w(),console.log("Utilizador eliminado com sucesso:",t)}catch(c){console.error("Erro ao eliminar utilizador:",c)}}async function l(t){const i=t.id;t.visible=!1;try{await W(i,t),await w(),console.log("Utilizador eliminado com sucesso:",i)}catch(c){console.error("Erro ao eliminar utilizador:",c)}}const s=U(()=>Math.ceil(d.value.length/u.value)),a=n(v.value),m=U(()=>{const t=[],i=Math.floor(2);let c=Math.max(a.value-i,1),o=c+4-1;o>s.value&&(o=s.value,c=Math.max(o-4,1));for(let D=c;D<=o;D++)t.push(D);return t});F(v,t=>{a.value=t,console.log("Current page:",t)});const te=U(()=>{const t=k.query.add;return!(t===void 0||t==="false")}),le=U(()=>{const t=k.query.edit;return!(t===void 0||t==="false")}),ie=n(!1);n(!1);const B=n(te.value),S=n(le.value);console.log("isModalActive:",B.value),F(()=>k.query.add,t=>{B.value=t!=="false"&&t!==void 0}),F(()=>k.query.edit,t=>{S.value=t!=="false"&&t!==void 0});function oe(){ie.value=!0,B.value=!0,A.push({path:"/materiais",query:{add:"true"}})}return(t,i)=>{const c=ce("router-link");return p(),g(Q,null,[e("div",{class:"materiais-container",style:$({filter:B.value||S.value?"blur(5px)":"blur(0)"})},[b(re,{page:4,disable:B.value},null,8,["disable"]),e("div",Se,[i[9]||(i[9]=e("h2",{class:"mb-4 fw-bold",id:"title"},"Materiais",-1)),e("div",Qe,[e("table",We,[i[0]||(i[0]=e("thead",{class:"text-center align-middle"},[e("tr",null,[e("th",{scope:"col"},"Nome"),e("th",{scope:"col"},"Tipo"),e("th",{scope:"col",id:"descricao"},"Descrição"),e("th",{scope:"col"},"Quantidade"),e("th",{scope:"col"},"Ação"),e("th",{scope:"col"},"Preço")])],-1)),e("tbody",je,[(p(!0),g(Q,null,K(M.value,o=>(p(),g("tr",{key:o.id},[e("td",{style:$({backgroundColor:r.value.includes(o.id)?"lightblue":"white"})},P(o.nome),5),e("td",{style:$({backgroundColor:r.value.includes(o.id)?"lightblue":"white"})},P(o.tipo),5),e("td",{style:$({backgroundColor:r.value.includes(o.id)?"lightblue":"white"})},P(o.descricao),5),e("td",{style:$({backgroundColor:r.value.includes(o.id)?"lightblue":"white"})},P(o.quant),5),e("td",{class:"actions-container",style:$({backgroundColor:r.value.includes(o.id)?"lightblue":"white"})},[e("button",{class:"actions",style:{color:"red"},onClick:D=>l(o)},[b(L(ye),{width:"20px",height:"20px"})],8,He),e("button",{class:"actions",style:{color:"orange"},onClick:D=>V(o.id,o)},[b(L(fe),{width:"20px",height:"20px"})],8,Re)],4),e("td",{style:$({backgroundColor:r.value.includes(o.id)?"lightblue":"white"})},P(o.preco)+" € ",5)]))),128))])])]),e("nav",Ge,[e("ul",Je,[a.value!=1?(p(),g("li",Ke,[b(c,{to:{path:"/materiais",query:{page:a.value-1}},class:"page-link"},{default:x(()=>i[1]||(i[1]=[e("span",{class:"page-link",id:"prev"},"<<Prev",-1)])),_:1},8,["to"])])):(p(),g("li",Oe,[b(c,{to:{path:"/materiais",query:{page:a.value-1}},class:"page-link"},{default:x(()=>i[2]||(i[2]=[e("span",{class:"page-link",id:"prev"},"<<Prev",-1)])),_:1},8,["to"])])),a.value!==1?(p(),T(c,{key:2,to:{path:"/materiais",query:{page:1}},class:"page-link"},{default:x(()=>i[3]||(i[3]=[I(" First ")])),_:1})):(p(),T(c,{key:3,to:{path:"/materiais",query:{page:1}},class:"page-link disabled"},{default:x(()=>i[4]||(i[4]=[I(" First ")])),_:1})),(p(!0),g(Q,null,K(m.value,o=>(p(),g("li",{key:o,class:pe(["page-item",{active:o===a.value}])},[o!==a.value?(p(),T(c,{key:0,to:{path:"/materiais",query:{page:o}},class:"page-link"},{default:x(()=>[I(P(o),1)]),_:2},1032,["to"])):(p(),g("span",Xe,P(o),1))],2))),128)),a.value!==s.value?(p(),T(c,{key:4,to:{path:"/materiais",query:{page:s.value}},class:"page-link"},{default:x(()=>i[5]||(i[5]=[I(" Last ")])),_:1},8,["to"])):(p(),T(c,{key:5,to:{path:"/materiais",query:{page:s.value}},class:"page-link disabled"},{default:x(()=>i[6]||(i[6]=[I(" Last ")])),_:1},8,["to"])),a.value==s.value?(p(),g("li",Ye,[b(c,{to:{path:"/materiais",query:{page:a.value+1}},class:"page-link"},{default:x(()=>i[7]||(i[7]=[e("span",{class:"page-link",id:"next"},"Next >>",-1)])),_:1},8,["to"])])):(p(),g("li",Ze,[b(c,{to:{path:"/materiais",query:{page:a.value+1}},class:"page-link"},{default:x(()=>i[8]||(i[8]=[e("span",{class:"page-link",id:"next"},"Next >>",-1)])),_:1},8,["to"])]))])]),e("div",{class:"text-end mt-3"},[e("button",{type:"button",class:"btn btn-warning",id:"adicionar",onClick:oe}," Adicionar ")])])],4),b($e,{visible:B.value,onMaterialAdded:w},null,8,["visible"]),b(Fe,{isModalVisible:S.value,onMaterialEdited:w},null,8,["isModalVisible"])],64)}}}),ra=G(ea,[["__scopeId","data-v-e11cd383"]]);export{ra as default};
